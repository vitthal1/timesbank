(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344],{163:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return t(4414)}])},6781:function(e,r,t){"use strict";t.d(r,{a:function(){return u}});var s=t(7294),n=t(1163),a=t(9263);let i={user:null,loading:!0,error:null},o=async e=>{let{data:r,error:t}=await a.O.from("users").select("*").eq("id",e).single();if(t){if("PGRST116"===t.code)return null;throw Error("Failed to fetch user: ".concat(t.message))}return r},u=()=>{let[e,r]=(0,s.useState)(i),t=(0,n.useRouter)();(0,s.useEffect)(()=>{let e=!0;(async()=>{try{let{data:{session:t},error:s}=await a.O.auth.getSession();if(!e)return;if(s){r({user:null,loading:!1,error:s.message});return}if(null==t?void 0:t.user){let s=await o(t.user.id);if(!e)return;s?r({user:s,loading:!1,error:null}):r({user:null,loading:!0,error:null})}else r({user:null,loading:!1,error:null})}catch(t){if(!e)return;r({user:null,loading:!1,error:t instanceof Error?t.message:"Authentication failed"})}})();let{data:{subscription:s}}=a.O.auth.onAuthStateChange(async(s,n)=>{if(e){if("SIGNED_IN"===s&&(null==n?void 0:n.user))try{await new Promise(e=>setTimeout(e,500));let t=await o(n.user.id);t?r({user:t,loading:!1,error:null}):setTimeout(async()=>{let t=await o(n.user.id);t&&e&&r({user:t,loading:!1,error:null})},1e3)}catch(e){r({user:null,loading:!1,error:e instanceof Error?e.message:"User setup failed"})}else"SIGNED_OUT"===s?r({user:null,loading:!1,error:null}):"PASSWORD_RECOVERY"===s&&t.push("/reset-password")}});return()=>{e=!1,s.unsubscribe()}},[t]);let u=async(e,t)=>{try{r(e=>({...e,loading:!0,error:null}));let{data:s,error:n}=await a.O.auth.signInWithPassword({email:e,password:t});if(n){let e=n.message||"Sign in failed";return r(r=>({...r,loading:!1,error:e})),{success:!1,error:e}}if(!s.user)return r(e=>({...e,loading:!1,error:"Sign in failed - no user data"})),{success:!1,error:"Sign in failed - no user data"};return{success:!0,error:null}}catch(t){let e=t instanceof Error?t.message:"Sign in failed";return r(r=>({...r,loading:!1,error:e})),{success:!1,error:e}}},l=async(e,t,s,n,i,o)=>{try{r(e=>({...e,loading:!0,error:null}));let{data:u,error:l}=await a.O.auth.signUp({email:e,password:t,options:{data:{username:s,bio:n,phone:i,location:o}}});if(l){let e=l.message||"Sign up failed";return r(r=>({...r,loading:!1,error:e})),{success:!1,error:e}}if(!u.user)return r(e=>({...e,loading:!1,error:"Sign up failed"})),{success:!1,error:"Sign up failed"};return{success:!0,error:null}}catch(t){let e=t instanceof Error?t.message:"Sign up failed";return r(r=>({...r,loading:!1,error:e})),{success:!1,error:e}}},c=async()=>{try{r(e=>({...e,loading:!0}));let{error:e}=await a.O.auth.signOut();if(e){let t=e.message||"Sign out failed";return r(e=>({...e,loading:!1,error:t})),{success:!1,error:t}}return r({user:null,loading:!1,error:null}),t.push("/"),{success:!0,error:null}}catch(t){let e=t instanceof Error?t.message:"Sign out failed";return r(r=>({...r,loading:!1,error:e})),{success:!1,error:e}}},d=async e=>{try{let{data:{user:r},error:t}=await a.O.auth.getUser();if(t||!r)return{success:!1,error:"Not authenticated"};let{error:s}=await a.O.auth.updateUser({password:e});if(s)return{success:!1,error:s.message};return{success:!0,error:null}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Password update failed"}}},g=async e=>{try{let{error:r}=await a.O.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(r)return{success:!1,error:r.message};return{success:!0,error:null}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Password reset failed"}}};return{user:e.user,loading:e.loading,error:e.error,signIn:u,signUp:l,signOut:c,logout:c,updatePassword:d,resetPassword:g}}},9263:function(e,r,t){"use strict";t.d(r,{O:function(){return i}});var s=t(1543);let n="https://eokrnauyrkhbgzzamnfk.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVva3JuYXV5cmtoYmd6emFtbmZrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1MDAzMTEsImV4cCI6MjA3NTA3NjMxMX0.QquyljjO3mJ17s5RlQhbuUgaJB3AGkU9kzBn-UXtX_4";if(!n||!a)throw Error("Missing Supabase environment variables");let i=(0,s.eI)(n,a)},4414:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return u}});var s=t(5893),n=t(7294),a=t(6781),i=t(1163);function o(){let[e,r]=(0,n.useState)(""),[t,o]=(0,n.useState)(""),[u,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),{signIn:g,error:h,user:f}=(0,a.a)(),m=(0,i.useRouter)();(0,n.useEffect)(()=>{f&&!c&&m.push("/dashboard")},[f,m,c]);let p=async r=>{r.preventDefault(),d(!0),(await g(e,t)).success?m.push("/dashboard"):d(!1)};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-600 to-blue-500",children:(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-white mb-6 text-center",children:"Login"}),(0,s.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-white mb-2 text-sm font-medium",children:"Email"}),(0,s.jsx)("input",{type:"email",value:e,onChange:e=>r(e.target.value),className:"w-full bg-white/10 border border-white/20 rounded-lg py-3 px-4 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent transition",placeholder:"your@email.com",required:!0,disabled:c})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-white mb-2 text-sm font-medium",children:"Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:u?"text":"password",value:t,onChange:e=>o(e.target.value),className:"w-full bg-white/10 border border-white/20 rounded-lg py-3 px-4 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-transparent transition",placeholder:"••••••••",required:!0,disabled:c}),(0,s.jsx)("button",{type:"button",onClick:()=>l(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-white/60 hover:text-white transition",disabled:c,children:u?"\uD83D\uDC41️":"\uD83D\uDC41️‍\uD83D\uDDE8️"})]})]}),(0,s.jsx)("div",{className:"text-right",children:c?(0,s.jsx)("span",{className:"text-white/50 text-sm font-medium underline transition opacity-50 cursor-not-allowed",children:"Forgot Password?"}):(0,s.jsx)("a",{href:"/reset-password",className:"text-white/70 hover:text-white text-sm font-medium underline transition",children:"Forgot Password?"})}),h&&(0,s.jsx)("div",{className:"bg-red-500/20 border border-red-400 text-white px-4 py-3 rounded-lg text-sm",children:h}),(0,s.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold py-3 rounded-lg hover:opacity-90 transition disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Logging in...":"Login"})]}),(0,s.jsxs)("p",{className:"text-white/70 text-center mt-6 text-sm",children:["Don't have an account?"," ",(0,s.jsx)("a",{href:"/auth/register",className:"text-purple-200 hover:text-white font-medium underline",children:"Register"})]})]})})}function u(){return(0,s.jsx)(o,{})}},1163:function(e,r,t){e.exports=t(3079)}},function(e){e.O(0,[543,888,774,179],function(){return e(e.s=163)}),_N_E=e.O()}]);